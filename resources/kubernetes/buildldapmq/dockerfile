FROM ibmcom/mq 
RUN echo "DEFINE QLOCAL(Q1)" >> /etc/mqm/ldap.mqsc && echo "DEFINE CHANNEL(QMLDAP_SVRCONN) CHLTYPE(SVRCONN) TRPTYPE(TCP) SSLCIPH('ECDHE_RSA_AES_128_CBC_SHA256') SSLCAUTH(OPTIONAL)"  >> /etc/mqm/ldap.mqsc && echo "SET CHLAUTH(QMLDAP_SVRCONN) TYPE(BLOCKUSER) ACTION(REPLACE) USERLIST('nobody')" >> /etc/mqm/ldap.mqsc && echo "DEFINE AUTHINFO(USE.LDAP) AUTHTYPE(IDPWLDAP) CONNAME('ldap-service.ldap(389)') LDAPUSER('cn=admin,dc=ibm,dc=com') LDAPPWD('admin') SECCOMM(NO) USRFIELD('uid') SHORTUSR('uid') BASEDNU('ou=people,dc=ibm,dc=com') AUTHORMD(SEARCHGRP) BASEDNG('ou=groups,dc=ibm,dc=com') GRPFIELD('cn') CLASSGRP('groupOfUniqueNames') FINDGRP('uniqueMember')"  >> /etc/mqm/ldap.mqsc && echo "ALTER QMGR CONNAUTH(USE.LDAP)"  >> /etc/mqm/ldap.mqsc && echo "REFRESH SECURITY" >> /etc/mqm/ldap.mqsc && echo "SET AUTHREC OBJTYPE(QMGR) GROUP('apps') AUTHADD(ALL)" >> /etc/mqm/ldap.mqsc && echo "SET AUTHREC PROFILE('Q1') OBJTYPE(QUEUE) GROUP('apps') AUTHADD(ALL)" >> /etc/mqm/ldap.mqsc && echo "REFRESH SECURITY" >> /etc/mqm/ldap.mqsc
RUN cat /etc/mqm/ldap.mqsc
